# Accountant Salary Calculation & Payslip System

## Staff Categories & Payment Cycles

### Weekly Wages (Field Staff & Delivery Staff)
- **Payment Cycle**: Weekly (7 days)
- **Calculation**: Net Pay = (Daily Rate × Days Worked) + Overtime - Deductions
- **Components**:
  - Daily Rate (base rate per day)
  - Days Worked (actual attendance)
  - Overtime Hours × Overtime Rate
  - Deductions (PF, Tax, Insurance)

### Monthly Salary (Lab Staff, Manager, Accountant)
- **Payment Cycle**: Monthly (30/31 days)
- **Calculation**: Net Pay = Basic Pay + Allowances - Deductions
- **Components**:
  - Basic Pay (fixed monthly salary)
  - Allowances (HRA, Transport, Medical, etc.)
  - Deductions (PF, Tax, Insurance, Professional Tax)

## Salary Calculation Rules

### 1. Field Staff (Weekly)
```
Gross Earnings = (Daily Rate × Days Worked) + (Overtime Hours × Overtime Rate)
Total Deductions = PF + Tax + Insurance
Net Pay = Gross Earnings - Total Deductions
```

**Example:**
- Daily Rate: ₹500
- Days Worked: 6 days
- Overtime: 4 hours @ ₹75/hour
- Basic Earnings: ₹500 × 6 = ₹3,000
- Overtime: 4 × ₹75 = ₹300
- Gross: ₹3,300
- Deductions: ₹165 (5% PF)
- Net Pay: ₹3,135

### 2. Delivery Staff (Weekly)
```
Gross Earnings = (Daily Rate × Days Worked) + Delivery Bonus + Overtime
Total Deductions = PF + Tax + Insurance
Net Pay = Gross Earnings - Total Deductions
```

**Example:**
- Daily Rate: ₹600
- Days Worked: 6 days
- Delivery Bonus: ₹500
- Basic Earnings: ₹600 × 6 = ₹3,600
- Bonus: ₹500
- Gross: ₹4,100
- Deductions: ₹205 (5% PF)
- Net Pay: ₹3,895

### 3. Lab Staff (Monthly)
```
Gross Salary = Basic Pay + HRA + Medical + Transport
Total Deductions = PF + Tax + Professional Tax + Insurance
Net Pay = Gross Salary - Total Deductions
```

**Example:**
- Basic Pay: ₹25,000
- HRA: ₹10,000 (40%)
- Medical: ₹2,000
- Transport: ₹1,500
- Gross: ₹38,500
- Deductions:
  - PF: ₹3,000 (12% of Basic)
  - Tax: ₹1,925 (5%)
  - Professional Tax: ₹200
  - Total: ₹5,125
- Net Pay: ₹33,375

### 4. Manager (Monthly)
```
Gross Salary = Basic Pay + HRA + Special Allowance + Performance Bonus
Total Deductions = PF + Tax + Professional Tax + Insurance
Net Pay = Gross Salary - Total Deductions
```

**Example:**
- Basic Pay: ₹50,000
- HRA: ₹20,000 (40%)
- Special Allowance: ₹10,000
- Performance Bonus: ₹5,000
- Gross: ₹85,000
- Deductions:
  - PF: ₹6,000 (12% of Basic)
  - Tax: ₹8,500 (10%)
  - Professional Tax: ₹200
  - Total: ₹14,700
- Net Pay: ₹70,300

### 5. Accountant (Monthly)
```
Gross Salary = Basic Pay + HRA + Professional Allowance
Total Deductions = PF + Tax + Professional Tax + Insurance
Net Pay = Gross Salary - Total Deductions
```

**Example:**
- Basic Pay: ₹40,000
- HRA: ₹16,000 (40%)
- Professional Allowance: ₹5,000
- Gross: ₹61,000
- Deductions:
  - PF: ₹4,800 (12% of Basic)
  - Tax: ₹6,100 (10%)
  - Professional Tax: ₹200
  - Total: ₹11,100
- Net Pay: ₹49,900

## Payslip Format

### Weekly Payslip (Field Staff / Delivery Staff)

```
═══════════════════════════════════════════════════════════
                    HOLY FAMILY POLYMERS
                      WEEKLY WAGE SLIP
═══════════════════════════════════════════════════════════

Employee Name: John Doe                    Employee ID: FS001
Designation: Field Staff                   Department: Operations
Pay Period: Week 1 (Jan 1 - Jan 7, 2026)  Payment Date: Jan 8, 2026

───────────────────────────────────────────────────────────
EARNINGS                                           AMOUNT (₹)
───────────────────────────────────────────────────────────
Daily Rate (₹500 × 6 days)                          3,000.00
Overtime (4 hrs @ ₹75/hr)                             300.00
                                                  ───────────
GROSS EARNINGS                                      3,300.00

───────────────────────────────────────────────────────────
DEDUCTIONS                                         AMOUNT (₹)
───────────────────────────────────────────────────────────
Provident Fund (5%)                                   165.00
                                                  ───────────
TOTAL DEDUCTIONS                                      165.00

───────────────────────────────────────────────────────────
NET PAY                                             3,135.00
═══════════════════════════════════════════════════════════

Payment Mode: Bank Transfer
Account Number: XXXX-XXXX-1234
Bank: State Bank of India

Generated by: Accountant Name
Date: Jan 8, 2026
```

### Monthly Payslip (Lab Staff / Manager / Accountant)

```
═══════════════════════════════════════════════════════════
                    HOLY FAMILY POLYMERS
                      MONTHLY SALARY SLIP
═══════════════════════════════════════════════════════════

Employee Name: Jane Smith                  Employee ID: LAB001
Designation: Lab Technician                Department: Laboratory
Pay Period: January 2026                   Payment Date: Feb 1, 2026

───────────────────────────────────────────────────────────
EARNINGS                                           AMOUNT (₹)
───────────────────────────────────────────────────────────
Basic Pay                                          25,000.00
House Rent Allowance (40%)                         10,000.00
Medical Allowance                                   2,000.00
Transport Allowance                                 1,500.00
                                                  ───────────
GROSS SALARY                                       38,500.00

───────────────────────────────────────────────────────────
DEDUCTIONS                                         AMOUNT (₹)
───────────────────────────────────────────────────────────
Provident Fund (12% of Basic)                       3,000.00
Income Tax (5%)                                     1,925.00
Professional Tax                                      200.00
                                                  ───────────
TOTAL DEDUCTIONS                                    5,125.00

───────────────────────────────────────────────────────────
NET SALARY                                         33,375.00
═══════════════════════════════════════════════════════════

Payment Mode: Bank Transfer
Account Number: XXXX-XXXX-5678
Bank: HDFC Bank

Year-to-Date Earnings: ₹33,375.00
Year-to-Date Deductions: ₹5,125.00

Generated by: Accountant Name
Date: Feb 1, 2026
```

## Implementation in System

### Database Schema

```javascript
// Salary Record Schema
{
  employeeId: ObjectId,
  employeeName: String,
  designation: String,
  department: String,
  paymentCycle: 'weekly' | 'monthly',
  payPeriod: {
    start: Date,
    end: Date,
    month: String, // for monthly
    week: Number   // for weekly
  },
  earnings: {
    basicPay: Number,
    dailyRate: Number,
    daysWorked: Number,
    overtimeHours: Number,
    overtimeRate: Number,
    allowances: {
      hra: Number,
      medical: Number,
      transport: Number,
      special: Number,
      professional: Number
    },
    bonus: Number
  },
  deductions: {
    pf: Number,
    tax: Number,
    professionalTax: Number,
    insurance: Number,
    other: Number
  },
  grossPay: Number,
  totalDeductions: Number,
  netPay: Number,
  paymentStatus: 'pending' | 'processed' | 'paid',
  paymentDate: Date,
  paymentMode: String,
  bankDetails: {
    accountNumber: String,
    bankName: String,
    ifsc: String
  },
  generatedBy: ObjectId,
  generatedAt: Date
}
```

### API Endpoints

1. **Calculate Salary**: `POST /api/accountant/calculate-salary`
2. **Generate Payslip**: `POST /api/accountant/generate-payslip`
3. **Get Salary Records**: `GET /api/accountant/salary-records`
4. **Update Salary**: `PUT /api/accountant/salary/:id`
5. **Process Payment**: `POST /api/accountant/process-payment/:id`

## Calculation Logic

### Weekly Staff Calculation
```javascript
function calculateWeeklySalary(employee, attendance) {
  const basicEarnings = employee.dailyRate * attendance.daysWorked;
  const overtimePay = attendance.overtimeHours * employee.overtimeRate;
  const grossEarnings = basicEarnings + overtimePay + (attendance.bonus || 0);
  
  const pfDeduction = grossEarnings * 0.05; // 5% PF
  const taxDeduction = grossEarnings * 0.02; // 2% Tax
  const totalDeductions = pfDeduction + taxDeduction;
  
  const netPay = grossEarnings - totalDeductions;
  
  return {
    grossEarnings,
    totalDeductions,
    netPay,
    breakdown: {
      basicEarnings,
      overtimePay,
      pfDeduction,
      taxDeduction
    }
  };
}
```

### Monthly Staff Calculation
```javascript
function calculateMonthlySalary(employee) {
  const basicPay = employee.basicPay;
  const hra = basicPay * 0.40; // 40% HRA
  const allowances = employee.allowances || {};
  
  const grossSalary = basicPay + hra + 
    (allowances.medical || 0) + 
    (allowances.transport || 0) + 
    (allowances.special || 0) + 
    (allowances.professional || 0);
  
  const pfDeduction = basicPay * 0.12; // 12% PF on basic
  const taxDeduction = grossSalary * (employee.taxRate || 0.05); // 5-10% Tax
  const professionalTax = 200; // Fixed
  const totalDeductions = pfDeduction + taxDeduction + professionalTax;
  
  const netSalary = grossSalary - totalDeductions;
  
  return {
    grossSalary,
    totalDeductions,
    netSalary,
    breakdown: {
      basicPay,
      hra,
      allowances,
      pfDeduction,
      taxDeduction,
      professionalTax
    }
  };
}
```

## Features to Implement

1. **Auto-Calculate Salaries** - Based on attendance and rates
2. **Generate Payslips** - PDF/Print format
3. **Bulk Processing** - Process multiple salaries at once
4. **Payment Tracking** - Track payment status
5. **Salary History** - View past salary records
6. **Reports** - Monthly/Yearly salary reports
7. **Export** - Export to Excel/PDF
8. **Email Payslips** - Send payslips to employees

## Next Steps

1. Create salary calculation service
2. Build payslip generation component
3. Add salary processing workflow
4. Implement payment tracking
5. Create salary reports dashboard
